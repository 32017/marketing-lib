{"version":3,"file":"NavAnchor-25ee0d4d.js","sources":["../../src/components/partials/NavAnchor.js"],"sourcesContent":["import React from 'react';\nimport Link from '../Link';\nimport Button from '../Button';\nimport PropTypes from 'prop-types';\n\nclass NavAnchor extends React.Component {\n  constructor(props) {\n    super(props);\n    this.elem = React.createRef();\n    this.anchor = React.createRef();\n    this.state = {\n      defaultTop: 0,\n      scrollPos: 0,\n    };\n\n    this.doHashChange = this.doHashChange.bind(this);\n  }\n\n  doHashChange(tab, index) {\n    Array.from(this.anchor.current.children).forEach((elem, i) => {\n      if (index === i) elem.classList.add('is-active');\n      else elem.classList.remove('is-active');\n    });\n  }\n\n  componentDidMount() {\n    if (typeof window !== 'undefined') {\n      this.setState({\n        defaultTop:\n          window.innerWidth < 960 ? 50 : this.elem.current.offsetTop || this.elem.current.parentElement.offsetTop,\n      });\n      window.addEventListener('resize', e => {\n        if (this.elem.current) {\n          this.setState({\n            defaultTop:\n              window.innerWidth < 960 ? 50 : this.elem.current.offsetTop || this.elem.current.parentElement.offsetTop,\n          });\n        }\n\n        if (this.props.tabs) {\n          this.anchorActive()\n        }\n      });\n\n      window.addEventListener('mousewheel', this.navScroller);\n      window.addEventListener('scroll', this.navScroller);\n    }\n  }\n\n  anchorActive = () => {\n    var isMobile = window.innerWidth < 960;\n    let lastIndex = 0;\n\n    this.props.tabs.forEach((tab, i) => {\n      let elem = document.getElementById(tab.link.slice(1));\n      // console.log( this.anchor.current)\n      if (elem && null !== this.anchor.current) {\n        let anchor = this.anchor.current.children[i];\n        let rect = elem.getBoundingClientRect();\n        let y = window.scrollY || document.documentElement.scrollTop;\n        if (!isMobile) {\n          if (rect.top > 0 && rect.top < 150) {\n            anchor.classList.add('is-active');\n          } else {\n            anchor.classList.remove('is-active');\n          }\n        } else {\n          if (rect.top > 0 && rect.top < 150) lastIndex = i;\n        }\n      }\n    });\n  }\n\n  navScroller = e => {\n    if (!this.elem.current) {\n      return;\n    }\n\n    let scrollY = window.scrollY || document.documentElement.scrollTop;\n    let headerDom = Array.from(document.getElementsByTagName('header'));\n    let header = headerDom[0].clientHeight;\n\n    if (headerDom.length) {\n      if (scrollY > this.state.scrollPos && scrollY > 0) {\n        headerDom.map(dom => {\n          return dom.style.transform = `translateY(${(-scrollY < -header ? -header : -scrollY)}px)`;\n        });\n\n        if (scrollY >= header) {\n          this.elem.current.classList.add('is-fixed');\n        }\n      }\n\n      if (scrollY < this.state.scrollPos && scrollY < this.state.defaultTop + header) {\n        this.elem.current.classList.remove('is-fixed');\n        // console.log('dom', scrollY, scrollY <= 0 ? 0 : -scrollY)\n        headerDom.map(dom => {\n          return dom.style.transform = `translateY(${(scrollY <= 0 ? 0 : -scrollY)}px)`;\n        });\n      }\n    }\n\n    this.setState({ scrollPos: scrollY });\n\n    var isMobile = window.innerWidth < 960;\n    let lastIndex = 0;\n\n    if (this.props.tabs) {\n      this.anchorActive();\n    }\n\n    if (isMobile) {\n      Array.from(this.anchor.current.children).forEach((item, i) => {\n        if (i === lastIndex) item.classList.add('is-active');\n        else item.classList.remove('is-active');\n      });\n    }\n  }\n  render() {\n    return (\n      <div className={`fui-nav-anchor`} ref={this.elem}>\n        <div className='fui-container'>\n          <div className='content'>\n            <div className='subtitle' dangerouslySetInnerHTML={{ __html: this.props.pageTitle }}></div>\n            <div className='page-anchor' ref={this.anchor}>\n              {this.props.tabs\n                ? this.props.tabs.map((tab, i) => (\n                  <Link\n                    to={tab.link}\n                    key={`page-anchor-${i}`}\n                    className={`page-anchor-item ${typeof window !== 'undefined' && tab.link === window.location.pathname ? 'is-active' : ''}`}\n                    onClick={e => this.doHashChange(tab, i)}>\n                    {tab.label}\n                  </Link>\n                ))\n                : null}\n            </div>\n          </div>\n          <div className='extra d-flex'>\n            {!!this.props.button && this.props.button.length > 1 ?\n              this.props.button.map((item, j) => {\n                return (\n                  <Button {...item} key={item + j} size='small' btnStyle={j == 0 ? 'primary' : 'secondary'} className={j == 0 ? 'mr-2' : ''}>\n                    {item.text}\n                  </Button>\n                )\n              }) : null\n            }\n            {!this.props.redButton === false && this.props.redButton.text ? (\n              <Button {...this.props.redButton} size='small' btnStyle='primary' className={'mr-2'}>\n                {this.props.redButton.text}\n              </Button>\n            ) : (\n                ''\n              )}\n            {!this.props.button === false && this.props.button.text ? (\n              <Button {...this.props.button} size='small' btnStyle='secondary'>\n                {this.props.button.text}\n              </Button>\n            ) : (\n                ''\n              )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nNavAnchor.propTypes = {\n  pageTitle: PropTypes.string,\n  tabs: PropTypes.arrayOf(\n    PropTypes.shape({\n      label: PropTypes.string,\n    })\n  ),\n  button: PropTypes.any,\n  onChange: PropTypes.func,\n};\n\nexport default NavAnchor;\n"],"names":["NavAnchor","props","isMobile","window","innerWidth","tabs","forEach","tab","i","elem","document","getElementById","link","slice","_this","anchor","current","children","rect","getBoundingClientRect","scrollY","documentElement","scrollTop","top","classList","add","remove","e","headerDom","Array","from","getElementsByTagName","header","clientHeight","length","state","scrollPos","map","dom","style","transform","defaultTop","setState","anchorActive","item","React","createRef","doHashChange","bind","index","this","offsetTop","parentElement","addEventListener","_this2","navScroller","className","ref","dangerouslySetInnerHTML","__html","pageTitle","Link","to","key","location","pathname","onClick","_this3","label","button","j","Button","size","btnStyle","text","redButton","Component","propTypes","PropTypes","string","arrayOf","shape","any","onChange","func"],"mappings":"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"}